-if @tips.empty?
  %h1="There are no tips yet for #{@view}"
-else
  %h1="Tip Detail - #{@view}"
%table.table.tablesorter
  %thead
    %tr
      %th{scope: :col} Link
      %th.numeric{scope: :col} Week
      %th{scope: :col} Tipper
      %th{scope: :col} Sport
      %th{scope: :col} Match
      %th.numeric{scope: :col} Odds
      %th.numeric{scope: :col} Time
      %th{scope: :col} Successful?
      %th{scope: :col} Modify
  %tbody
    -@tips.compact.each do |tip|
      -seconds_to_match = tip.matchtime - Time.now rescue 2397600
      -row_class = tip.successful ? 'success' : tip.successful.nil? ? 'default' : 'danger'
      %tr{class: row_class}
        %th{scope: :row}
          %a{href: "/tip/#{tip.id}"}
            %i.fa.fa-money
        %td.numeric=tip.tippingweek
        %td
          %a{href:"/users/#{tip.user}"}=tip.user
        %td
          %a{href:"/sports/#{tip.sport}"}=tip.sport
        %td=tip.description
        %td.numeric=sprintf('$%.2f', tip.odds.to_f)
        %td.numeric=(seconds_to_match < 0 ? 'Complete' : sprintf('%.0f hours', seconds_to_match / 3600))
        -if tip.successful == nil
          %td
            %a{href:"/tip/#{tip.id}/success"}
              %i.fa.fa-thumbs-up
            |
            %a{href:"/tip/#{tip.id}/smashed"}
              %i.fa.fa-thumbs-down
        -else
          %td=tip.successful ? 'Win' : 'Lose'
        -if tip.deleted?
          %td
            %i.fa.fa-bomb
        -elsif tip.locked?
          %td
            %i.fa.fa-lock
        -else
          %td
            %a{href:"/tip/#{tip.id}/lock"}
              %i.fa.fa-lock

            %a{href:"/tip/#{tip.id}/edit"}
              %i.fa.fa-wrench

            %a{href:"/tip/#{tip.id}/delete"}
              %i.fa.fa-bomb
